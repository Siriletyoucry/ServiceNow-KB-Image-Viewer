# ServiceNow-KB-Image-Viewer

本项目是一个浏览器扩展程序，旨在增强 ServiceNow Classic UI平台（尤其是知识库文章）中的图片查看体验，提供现代化的图片预览功能，如缩放、拖拽、旋转和画廊模式。

## 功能特性

  - **现代化图片预览**: 点击页面中的任意图片，即可在半透明的遮罩层上打开功能丰富的预览器。
  - **丰富的交互操作**:
      - **缩放**: 使用鼠标滚轮或工具栏按钮进行放大和缩小。
      - **拖拽移动**: 按住鼠标拖动图片，自由查看任意细节。
      - **旋转**: 将图片按90度角进行顺时针旋转。
      - **重置**: 一键恢复图片的初始大小和位置。
      - **下载**: 方便地将当前查看的图片下载到本地。
  - **图片画廊模式**:
      - 自动将页面上所有图片组成一个图片组。
      - 使用“上一张”/“下一张”按钮或键盘方向键 `←` / `→` 快速切换。
  - **全面的键盘快捷键**:
      - `Esc`: 关闭预览器。
      - `+` / `↑`: 放大。
      - `-` / `↓`: 缩小。
      - `←`: 上一张图片。
      - `→`: 下一张图片。
      - `R`: 旋转图片。
  - **高度可定制化**:
      - **启用/禁用**: 通过弹出菜单中的总开关，可以随时开启或关闭所有功能。
      - **适用网站配置**: 自定义启用此扩展的网站域名，默认为 `servicenow.com`。
      - **主题切换**: 支持浅色 (Light)、深色 (Dark) 和自动 (Auto) 三种界面主题。
      - **多语言支持**: 界面语言支持英文 (English) 和中文 (中文)，可自动或手动切换。
      - **手动注入**: 对未自动加载的页面，可通过“手动注入”按钮强制启用功能。

## 安装

目前该扩展未上架应用商店，您可以通过以下步骤手动加载：

1.  下载或克隆本仓库到您的本地计算机。
2.  打开 Chrome/Edge 浏览器，在地址栏输入 `chrome://extensions` 并进入。
3.  在页面右上角，打开 **“开发者模式” (Developer mode)** 开关。
4.  点击 **“加载已解压的扩展程序” (Load unpacked)** 按钮。
5.  在弹出的文件选择框中，选择本项目所在的文件夹。
6.  安装完成！`ServiceNow Image Previewer` 的图标将出现在浏览器的工具栏上。

## 使用方法

1.  **自动激活**: 访问您在弹出菜单中配置的网站（例如任何 `*.servicenow.com` 的域名）。扩展程序将自动寻找并识别页面中的 `<iframe>` (gsft\_main)，并为其中的图片附加预览功能。
2.  **打开预览器**: 将鼠标悬停在图片上，光标会变为“放大镜”样式 (`zoom-in`)。点击图片即可打开预览器。
3.  **使用控件**:
      * **顶部工具栏**: 提供了关闭、缩小、放大、重置、旋转和下载等常用操作。
      * **左右箭头**: 用于在图片组中进行切换。
      * **键盘和鼠标**: 使用快捷键和鼠标滚轮进行高效操作。
4.  **配置**: 点击浏览器工具栏上的扩展图标，打开弹出菜单进行个性化配置。

## 🔧 配置项

所有配置都会自动保存到您的本地存储中。

| 配置项             | 描述                                                                          | 默认值                                |
| ------------------ | ----------------------------------------------------------------------------- | ------------------------------------- |
| **Enable Features**| 全局开关，用于启用或禁用扩展的所有功能。                         | `true`                                |
| **Language** | 设置弹出菜单和预览器工具栏的界面语言。                              | `Auto` (根据浏览器语言自动选择)       |
| **Theme** | 设置弹出菜单和预览器界面的主题。                                    | `Auto` (根据操作系统设置自动选择)     |
| **Enabled Sites** | 指定该扩展生效的网站域名列表，用逗号分隔。                           | `service-now.com`, `servicenow.com` |
| **Manual Inject** | 当扩展在某个页面上未自动生效时，可点击此按钮手动加载功能。         | -                                     |

## 🛠️ 技术栈

  * **Manifest V3**: 使用最新的 Chrome 扩展清单版本。
  * **JavaScript (ES6+)**: 无任何外部框架，使用原生 JS 实现所有逻辑。
  * **CSS3**: 用于设置弹出菜单和预览器的样式，支持浅色/深色主题。
  * **HTML5**: 构建弹出菜单的结构。

## 📄 许可证

本项目采用 [MIT License](https://www.google.com/search?q=LICENSE) 开源。
